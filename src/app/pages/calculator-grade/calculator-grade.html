<app-header></app-header>

<div class="calc-page container py-4 text-light">
  <div class="row">
    <!-- Calculator Section -->
    <div class="col-12 col-md-12 col-lg-6 mb-4">
      <h1 class="h4 fw-bold mb-2 text-info text-center">üìä Grade & Percentage Calculator</h1>

      <div class="calculator-shell shadow-lg rounded-4 p-3 mb-4 mx-auto">
        <!-- Custom Tab Bar -->
        <div class="custom-tab-bar">
          <button class="tab-option" [class.active]="activeTab === 'grade'" (click)="activeTab = 'grade'" type="button">
            <span class="tab-icon">üßÆ</span>
            <span class="tab-label">Grade</span>
          </button>
          <button class="tab-option" [class.active]="activeTab === 'percentage'" (click)="activeTab = 'percentage'"
            type="button">
            <span class="tab-icon">üî¨</span>
            <span class="tab-label">Percentage</span>
          </button>
        </div>

        <!-- Grade Calculator Tab -->
        <div *ngIf="activeTab === 'grade'">
          <h5 class="mb-3 fw-bold text-center">Assignment/Exam Grades</h5>

          <!-- Header Row -->
          <div class="row mb-2 small fw-bold text-secondary">
            <div class="col-5">Assignment/Exam (optional)</div>
            <div class="col-3">Grade</div>
            <div class="col-3">Weight</div>
            <div class="col-1"></div>
          </div>

          <!-- Assignment Rows -->
          <div *ngFor="let assignment of assignments; let i = index" class="assignment-row">
            <div class="row align-items-center">
              <div class="col-12 col-md-5 mb-2 mb-md-0">
                <input type="text" class="form-control" [(ngModel)]="assignment.name" placeholder="e.g., Homework 1">
              </div>
              <div class="col-5 col-md-3 mb-2 mb-md-0">
                <select class="form-select" [(ngModel)]="assignment.grade">
                  <option *ngFor="let grade of grades" [value]="grade">{{ grade }}</option>
                </select>
              </div>
              <div class="col-5 col-md-3 mb-2 mb-md-0">
                <input type="number" class="form-control" [(ngModel)]="assignment.weight" min="0" placeholder="0">
              </div>
              <div class="col-2 col-md-1 text-center">
                <i class="bi bi-x-circle-fill remove-btn fs-5" (click)="removeAssignment(i)"
                  [style.cursor]="assignments.length > 1 ? 'pointer' : 'not-allowed'"
                  [style.opacity]="assignments.length > 1 ? '1' : '0.3'"></i>
              </div>
            </div>
          </div>

          <!-- Add More Button -->
          <div class="text-center my-3">
            <button class="btn btn-link" (click)="addAssignment()">
              <i class="bi bi-plus-circle"></i> Add More Rows
            </button>
          </div>

          <!-- Final Grade Planning -->
          <div class="planning-section mt-4">
            <h5>üìå Final Grade Planning (Optional)</h5>
            <div class="row g-3">
              <div class="col-12 col-md-6">
                <label class="form-label">Final Grade Goal</label>
                <select class="form-select" [(ngModel)]="finalGradeGoal">
                  <option *ngFor="let grade of grades" [value]="grade">{{ grade }}</option>
                </select>
              </div>
              <div class="col-12 col-md-6">
                <label class="form-label">Weight of Remaining Tasks</label>
                <input type="number" class="form-control" [(ngModel)]="weightOfRemainingTasks" min="0" placeholder="0">
              </div>
            </div>
          </div>

          <!-- Action Buttons -->
          <div class="row g-2 mt-4">
            <div class="col-6">
              <button class="btn btn-primary w-100" (click)="calculateGrade()">
                <i class="bi bi-calculator"></i> Calculate
              </button>
            </div>
            <div class="col-6">
              <button class="btn btn-secondary w-100" (click)="clearGrade()">
                <i class="bi bi-arrow-counterclockwise"></i> Clear
              </button>
            </div>
          </div>

          <!-- Results -->
          <div *ngIf="calculatedGrade" class="result-card text-center">
            <div class="result-grade">{{ calculatedGrade }}</div>
            <div class="result-percentage">{{ calculatedPercentage }}%</div>
            <div *ngIf="requiredGrade" class="mt-3 border-top pt-3">
              <small>To achieve your goal, you need:</small>
              <div class="fs-5 fw-bold mt-1">{{ requiredGrade }}</div>
            </div>
          </div>

          <!-- Grade Scale Reference -->
          <div class="grade-scale">
            <h6>üìö Standard Grade Scale</h6>
            <div class="row">
              <div class="col-6">
                <div class="scale-item"><span>A+ / A / A-</span><span>90-100%</span></div>
                <div class="scale-item"><span>B+ / B / B-</span><span>80-89%</span></div>
                <div class="scale-item"><span>C+ / C / C-</span><span>70-79%</span></div>
              </div>
              <div class="col-6">
                <div class="scale-item"><span>D+ / D / D-</span><span>60-69%</span></div>
                <div class="scale-item"><span>F</span><span>0-59%</span></div>
              </div>
            </div>
          </div>
        </div>

        <!-- Percentage Calculator Tab -->
        <div *ngIf="activeTab === 'percentage'">
          <!-- What is X% of Y? -->
          <div class="percentage-card">
            <h5>üî¢ What is X% of Y?</h5>
            <div class="row g-2">
              <div class="col-6">
                <label class="form-label small">Percentage (%)</label>
                <input type="number" class="form-control" [(ngModel)]="percentageValue" placeholder="25">
              </div>
              <div class="col-6">
                <label class="form-label small">Of (Number)</label>
                <input type="number" class="form-control" [(ngModel)]="percentageOf" placeholder="200">
              </div>
              <div class="col-12">
                <button class="btn btn-primary w-100" (click)="calculatePercentageOf()">
                  <i class="bi bi-calculator"></i> Calculate
                </button>
              </div>
            </div>
            <div *ngIf="percentageResult > 0" class="alert alert-success mt-2 mb-0 small">
              <strong>Result:</strong> {{ percentageValue }}% of {{ percentageOf }} = <strong>{{ percentageResult
                }}</strong>
            </div>
          </div>

          <!-- X is what % of Y? -->
          <div class="percentage-card">
            <h5>üîç X is what % of Y?</h5>
            <div class="row g-2">
              <div class="col-6">
                <label class="form-label small">Value (X)</label>
                <input type="number" class="form-control" [(ngModel)]="whatIsValue" placeholder="50">
              </div>
              <div class="col-6">
                <label class="form-label small">Of Total (Y)</label>
                <input type="number" class="form-control" [(ngModel)]="whatIsOf" placeholder="200">
              </div>
              <div class="col-12">
                <button class="btn btn-primary w-100" (click)="calculateWhatIs()">
                  <i class="bi bi-calculator"></i> Calculate
                </button>
              </div>
            </div>
            <div *ngIf="whatIsResult > 0" class="alert alert-success mt-2 mb-0 small">
              <strong>Result:</strong> {{ whatIsValue }} is <strong>{{ whatIsResult.toFixed(2) }}%</strong> of {{
              whatIsOf }}
            </div>
          </div>

          <!-- X is Y% of what? -->
          <div class="percentage-card">
            <h5>üìä X is Y% of what?</h5>
            <div class="row g-2">
              <div class="col-6">
                <label class="form-label small">Value (X)</label>
                <input type="number" class="form-control" [(ngModel)]="isWhatValue" placeholder="50">
              </div>
              <div class="col-6">
                <label class="form-label small">Percentage (%)</label>
                <input type="number" class="form-control" [(ngModel)]="isWhatPercentOf" placeholder="25">
              </div>
              <div class="col-12">
                <button class="btn btn-primary w-100" (click)="calculateIsWhat()">
                  <i class="bi bi-calculator"></i> Calculate
                </button>
              </div>
            </div>
            <div *ngIf="isWhatResult > 0" class="alert alert-success mt-2 mb-0 small">
              <strong>Result:</strong> {{ isWhatValue }} is {{ isWhatPercentOf }}% of <strong>{{ isWhatResult.toFixed(2)
                }}</strong>
            </div>
          </div>

          <!-- Clear Button -->
          <div class="text-center mt-3">
            <button class="btn btn-secondary w-100" (click)="clearPercentage()">
              <i class="bi bi-arrow-counterclockwise"></i> Clear All
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Description Section -->
    <div class="col-12 col-md-12 col-lg-6 mb-4">
      <div class="description-panel">
        <div class="d-flex justify-content-between text-muted mb-3 opacity-50">
          <span class="fs-5">‚àö</span>
          <span class="fs-5 symbol-dots">..</span>
        </div>

        <h2 class="display-6 fw-bold mb-4 text-dark font-serif">Grade & Percentage<br>Calculator</h2>

        <p class="text-secondary mb-4 small">
          The <strong>Grade & Percentage Calculator</strong> helps users calculate percentages, grades, and score
          distributions quickly and accurately. It is especially useful for students, teachers, and academic
          professionals.
        </p>

        <p class="text-secondary mb-4 small">
          By entering total marks and obtained scores, users can instantly calculate percentages and grades without
          manual formulas. This saves time and ensures consistency in results.
        </p>

        <p class="text-secondary mb-4 small">
          The calculator is simple to use and works on all devices, helping students track academic performance and
          understand grading outcomes clearly.
        </p>

        <div class="d-flex justify-content-between text-muted mt-auto pt-4 opacity-50">
          <span class="fs-5 symbol-dots">..</span>
          <span class="fs-5">‚úï</span>
        </div>
      </div>
    </div>
  </div>

  <div class="row justify-content-center mt-4">
    <!-- Quick Reference Section -->
    <div class="col-12">
      <!-- Grade Calculator Quick Guide -->
      <div class="functions-section" *ngIf="activeTab === 'grade'">
        <h2 class="h5 fw-semibold mb-3 text-white">üìù Grade Calculator ‚Äì Quick Reference</h2>

        <h3 class="h6 text-white mt-3 mb-2">Grade Scale</h3>
        <div class="table-responsive small">
          <table class="table table-dark table-sm align-middle mb-3">
            <thead>
              <tr>
                <th>Letter Grade</th>
                <th>Percentage Range</th>
                <th>Quality Points</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>A+</td>
                <td>97-100%</td>
                <td>4.0</td>
              </tr>
              <tr>
                <td>A</td>
                <td>93-96%</td>
                <td>4.0</td>
              </tr>
              <tr>
                <td>A-</td>
                <td>90-92%</td>
                <td>3.7</td>
              </tr>
              <tr>
                <td>B+</td>
                <td>87-89%</td>
                <td>3.3</td>
              </tr>
              <tr>
                <td>B</td>
                <td>83-86%</td>
                <td>3.0</td>
              </tr>
              <tr>
                <td>B-</td>
                <td>80-82%</td>
                <td>2.7</td>
              </tr>
              <tr>
                <td>C+</td>
                <td>77-79%</td>
                <td>2.3</td>
              </tr>
              <tr>
                <td>C</td>
                <td>73-76%</td>
                <td>2.0</td>
              </tr>
              <tr>
                <td>C-</td>
                <td>70-72%</td>
                <td>1.7</td>
              </tr>
              <tr>
                <td>D+</td>
                <td>67-69%</td>
                <td>1.3</td>
              </tr>
              <tr>
                <td>D</td>
                <td>63-66%</td>
                <td>1.0</td>
              </tr>
              <tr>
                <td>D-</td>
                <td>60-62%</td>
                <td>0.7</td>
              </tr>
              <tr>
                <td>F</td>
                <td>0-59%</td>
                <td>0.0</td>
              </tr>
            </tbody>
          </table>
        </div>

        <h3 class="h6 text-white mt-4 mb-2">How It Works</h3>
        <div class="table-responsive small">
          <table class="table table-dark table-sm align-middle">
            <thead>
              <tr>
                <th>Feature</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Assignment Name</td>
                <td>Optional label for each grade entry</td>
              </tr>
              <tr>
                <td>Grade Selection</td>
                <td>Choose letter grade (A+ through F or "-" to skip)</td>
              </tr>
              <tr>
                <td>Weight/Points</td>
                <td>Enter weight value (points, percentage, etc.)</td>
              </tr>
              <tr>
                <td>Add Rows</td>
                <td>Click "Add More Rows" to add assignments</td>
              </tr>
              <tr>
                <td>Final Grade Goal</td>
                <td>Set target grade to calculate what's needed</td>
              </tr>
              <tr>
                <td>Calculation</td>
                <td>Weighted average based on all entered grades</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Percentage Calculator Quick Guide -->
      <div class="functions-section" *ngIf="activeTab === 'percentage'">
        <h2 class="h5 fw-semibold mb-3 text-white">üî¢ Percentage Calculator ‚Äì Quick Reference</h2>

        <h3 class="h6 text-white mt-3 mb-2">Calculation Types</h3>
        <div class="table-responsive small">
          <table class="table table-dark table-sm align-middle mb-3">
            <thead>
              <tr>
                <th>Type</th>
                <th>Formula</th>
                <th>Example</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>What is X% of Y?</td>
                <td>(X √∑ 100) √ó Y</td>
                <td>25% of 200 = 50</td>
              </tr>
              <tr>
                <td>X is what % of Y?</td>
                <td>(X √∑ Y) √ó 100</td>
                <td>50 is 25% of 200</td>
              </tr>
              <tr>
                <td>X is Y% of what?</td>
                <td>X √∑ (Y √∑ 100)</td>
                <td>50 is 25% of 200</td>
              </tr>
            </tbody>
          </table>
        </div>

        <h3 class="h6 text-white mt-4 mb-2">Common Uses</h3>
        <div class="table-responsive small">
          <table class="table table-dark table-sm align-middle">
            <thead>
              <tr>
                <th>Application</th>
                <th>Example</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Discounts</td>
                <td>30% off $100 = $30 discount</td>
              </tr>
              <tr>
                <td>Tax Calculation</td>
                <td>8% tax on $100 = $8</td>
              </tr>
              <tr>
                <td>Grade Percentage</td>
                <td>45 out of 50 = 90%</td>
              </tr>
              <tr>
                <td>Tip Amount</td>
                <td>15% of $80 bill = $12</td>
              </tr>
              <tr>
                <td>Interest Rate</td>
                <td>5% of $1000 = $50</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <!-- Complete Calculator Guide -->
  <div class="row mt-5">
    <div class="col-12">
      <div class="comprehensive-guide">
        <h2 class="h4 fw-bold mb-4 text-white text-center">üìö Complete Grade & Percentage Calculator Guide</h2>

        <div class="row">
          <!-- Grade Calculator Basics -->
          <div class="col-12 col-md-6 col-lg-4 mb-4">
            <div class="guide-section">
              <h3 class="h6 fw-semibold text-white mb-3">üìä Grade Calculator Basics</h3>
              <ul class="text-white small">
                <li><strong>Weighted Average:</strong> Each assignment contributes based on its weight</li>
                <li><strong>Letter Grades:</strong> Automatically converts to percentages</li>
                <li><strong>Flexible Input:</strong> Use points, percentages, or any unit consistently</li>
                <li><strong>Live Updates:</strong> See results instantly after calculating</li>
              </ul>
            </div>
          </div>

          <!-- Using the Grade Calculator -->
          <div class="col-12 col-md-6 col-lg-4 mb-4">
            <div class="guide-section">
              <h3 class="h6 fw-semibold text-white mb-3">‚úèÔ∏è Using the Grade Calculator</h3>
              <ul class="text-white small">
                <li><strong>Step 1:</strong> Enter assignment names (optional)</li>
                <li><strong>Step 2:</strong> Select letter grade from dropdown</li>
                <li><strong>Step 3:</strong> Enter weight or point value</li>
                <li><strong>Step 4:</strong> Add more rows as needed</li>
                <li><strong>Step 5:</strong> Click Calculate to see overall grade</li>
              </ul>
            </div>
          </div>

          <!-- Final Grade Planning -->
          <div class="col-12 col-md-6 col-lg-4 mb-4">
            <div class="guide-section">
              <h3 class="h6 fw-semibold text-white mb-3">üéØ Final Grade Planning</h3>
              <ul class="text-white small">
                <li><strong>Set Goal:</strong> Choose your desired final grade</li>
                <li><strong>Remaining Weight:</strong> Enter weight of future assignments</li>
                <li><strong>See Requirements:</strong> Calculator shows what grade you need</li>
                <li><strong>Plan Ahead:</strong> Know exactly what's needed to reach your goal</li>
              </ul>
            </div>
          </div>

          <!-- Percentage Basics -->
          <div class="col-12 col-md-6 col-lg-4 mb-4">
            <div class="guide-section">
              <h3 class="h6 fw-semibold text-white mb-3">üî¢ Percentage Calculation Basics</h3>
              <ul class="text-white small">
                <li><strong>Percentage:</strong> A ratio expressed as a fraction of 100</li>
                <li><strong>Symbol:</strong> Represented by the % sign</li>
                <li><strong>Formula:</strong> (Part √∑ Whole) √ó 100 = Percentage</li>
                <li><strong>Applications:</strong> Grades, discounts, statistics, finance</li>
              </ul>
            </div>
          </div>

          <!-- Real-World Examples -->
          <div class="col-12 col-md-6 col-lg-4 mb-4">
            <div class="guide-section">
              <h3 class="h6 fw-semibold text-white mb-3">üí° Real-World Examples</h3>
              <p class="text-white small mb-2"><strong>Grade Scenario:</strong></p>
              <ul class="text-white small">
                <li>Quiz 1: A (10 points) = 97%</li>
                <li>Midterm: B+ (30 points) = 87%</li>
                <li>Final: A- (40 points) = 90%</li>
                <li>Project: B (20 points) = 83%</li>
                <li><strong>Overall:</strong> 89.4% (B+)</li>
              </ul>
            </div>
          </div>

          <!-- Tips & Tricks -->
          <div class="col-12 col-md-6 col-lg-4 mb-4">
            <div class="guide-section">
              <h3 class="h6 fw-semibold text-white mb-3">üíé Tips & Tricks</h3>
              <ul class="text-white small">
                <li><strong>Consistency:</strong> Use same units for all weights</li>
                <li><strong>Skip Grades:</strong> Set to "-" to exclude from calculation</li>
                <li><strong>Decimal Precision:</strong> Results show two decimal places</li>
                <li><strong>Clear Button:</strong> Reset all fields to start fresh</li>
                <li><strong>Multiple Scenarios:</strong> Test different grade combinations</li>
              </ul>
            </div>
          </div>

          <!-- Percentage Examples -->
          <div class="col-12 col-md-6 col-lg-4 mb-4">
            <div class="guide-section">
              <h3 class="h6 fw-semibold text-white mb-3">üìê Percentage Examples</h3>
              <ul class="text-white small">
                <li><strong>20% of 150:</strong> 0.20 √ó 150 = 30</li>
                <li><strong>75 is what % of 300:</strong> (75 √∑ 300) √ó 100 = 25%</li>
                <li><strong>40 is 80% of what:</strong> 40 √∑ 0.80 = 50</li>
                <li><strong>Increase 200 by 15%:</strong> 200 + (200 √ó 0.15) = 230</li>
                <li><strong>Decrease 100 by 25%:</strong> 100 - (100 √ó 0.25) = 75</li>
              </ul>
            </div>
          </div>

          <!-- Understanding Weights -->
          <div class="col-12 col-md-6 col-lg-4 mb-4">
            <div class="guide-section">
              <h3 class="h6 fw-semibold text-white mb-3">‚öñÔ∏è Understanding Weights</h3>
              <ul class="text-white small">
                <li><strong>Points System:</strong> Total points each item is worth</li>
                <li><strong>Percentage System:</strong> % of final grade (must total 100)</li>
                <li><strong>Equal Weight:</strong> Use same number for all items</li>
                <li><strong>Mixed Weights:</strong> Higher weight = more impact on grade</li>
              </ul>
            </div>
          </div>

          <!-- Common Mistakes -->
          <div class="col-12 col-md-6 col-lg-4 mb-4">
            <div class="guide-section">
              <h3 class="h6 fw-semibold text-white mb-3">‚ö†Ô∏è Common Mistakes to Avoid</h3>
              <ul class="text-white small">
                <li><strong>Mixing Units:</strong> Don't mix points and percentages</li>
                <li><strong>Zero Weights:</strong> Assignments with 0 weight are ignored</li>
                <li><strong>Empty Grades:</strong> Rows with "-" grade don't count</li>
                <li><strong>Goal Setting:</strong> Include remaining weight for accurate planning</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<app-footer></app-footer>